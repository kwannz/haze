# Haze - é‡åŒ–äº¤æ˜“æŒ‡æ ‡åº“ç°ä»£åŒ–é¡¹ç›®

**ç”Ÿæˆæ—¶é—´**: 2025-12-25
**é¡¹ç›®çŠ¶æ€**: å¸ƒå±€é˜¶æ®µ (v0.1.0-alpha)
**æ ¸å¿ƒç›®æ ‡**: æ„å»ºé«˜æ€§èƒ½ã€ç”Ÿäº§çº§é‡åŒ–äº¤æ˜“æŠ€æœ¯æŒ‡æ ‡åº“

---

## ğŸ“‹ é¡¹ç›®æ¦‚è§ˆ

### æ ¸å¿ƒé¡¹ç›®
- **haze-Library**: Python + Rust æ··åˆæ¶æ„çš„æŠ€æœ¯æŒ‡æ ‡åº“
  - ä½ç½®: `/Users/zhaoleon/Desktop/haze/haze-Library/`
  - çŠ¶æ€: é…ç½®å®Œæˆï¼Œæºä»£ç å¾…å®ç°
  - æŠ€æœ¯æ ˆ: Python 3.9+ + Rust 1.75+ + PyO3/maturin

### å‚è€ƒé¡¹ç›®
1. **pandas-ta-kw** (212æŒ‡æ ‡ä½“ç³»)
   - 173ä¸ªPythonæ–‡ä»¶ï¼Œ12ä¸ªåŠŸèƒ½æ¨¡å—
   - å®Œæ•´çš„èœ¡çƒ›å›¾ã€åŠ¨é‡ã€è¶‹åŠ¿ã€æ³¢åŠ¨ç‡ã€æˆäº¤é‡æŒ‡æ ‡

2. **pyharmonics** (è°æ³¢æ¨¡å¼è¯†åˆ«)
   - 28ä¸ªPythonæ–‡ä»¶
   - XABCD, Gartley, Butterfly ç­‰æ¨¡å¼æ£€æµ‹

3. **ta-lib** (ç»å…¸C/C++åº“)
   - 252ä¸ªCæºæ–‡ä»¶
   - è·¨è¯­è¨€ç»‘å®š + Rusté›†æˆæŒ‡å—

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### åˆ†å±‚æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   åº”ç”¨å±‚ (User Code)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Python API Layer                  â”‚
â”‚   - SFGData (DataFrameæ‰©å±•)         â”‚
â”‚   - IndicatorConfig (é…ç½®ç®¡ç†)      â”‚
â”‚   - SignalResult (ç»“æœå®¹å™¨)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   Rust è®¡ç®—æ ¸å¿ƒ (PyO3ç»‘å®š)          â”‚
â”‚   - SuperTrend, ATR, Volume Profile â”‚
â”‚   - Linear Regression, MACD         â”‚
â”‚   - Harmonic Patterns               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   æ•°æ®æºå±‚                           â”‚
â”‚   - Binance (CCXT)                  â”‚
â”‚   - Yahoo Finance                   â”‚
â”‚   - Alpaca                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è®¾è®¡åŸåˆ™ (åŸºäº claude.md)

**KISS (ä¿æŒç®€å•)**
- âœ“ é¿å…ä¸å¿…è¦æŠ½è±¡
- âœ“ ä½¿ç”¨æè¿°æ€§å‘½å
- âœ“ ä¼˜å…ˆç®€å•ç®—æ³•

**YAGNI (ä½ ä¸ä¼šéœ€è¦å®ƒ)**
- âœ“ èšç„¦å½“å‰éœ€æ±‚
- âœ“ ç§»é™¤æŠ•æœºæ€§åŠŸèƒ½
- âœ“ å»¶è¿Ÿéå¿…è¦å†³ç­–

**SOLID åŸåˆ™**
- S: æ¯ä¸ªæŒ‡æ ‡ç‹¬ç«‹æ¨¡å—ï¼ˆå•ä¸€èŒè´£ï¼‰
- O: é€šè¿‡å­ç±»æ‰©å±•æŒ‡æ ‡ï¼ˆå¼€é—­åŸåˆ™ï¼‰
- L: å­ç±»å¯æ›¿æ¢çˆ¶ç±»ï¼ˆé‡Œæ°æ›¿æ¢ï¼‰
- I: å°è€Œä¸“ä¸€çš„æ¥å£ï¼ˆæ¥å£éš”ç¦»ï¼‰
- D: ä¾èµ–æŠ½è±¡é…ç½®ï¼ˆä¾èµ–åè½¬ï¼‰

**å¥¥å¡å§†å‰ƒåˆ€**
- âœ“ æœ€å°å®ä½“å‡è®¾
- âœ“ æ¯ä¸ªç»„ä»¶éƒ½æœ‰æ˜ç¡®ç†ç”±
- âœ“ é¿å…è¿‡åº¦å·¥ç¨‹åŒ–

---

## ğŸ“‚ ç›®å½•ç»“æ„

```
haze/
â”œâ”€â”€ claude.md                    # æ¶æ„å¸ˆè¡Œä¸ºå‡†åˆ™
â”œâ”€â”€ sprint.md                    # å¼€å‘è§„åˆ’æ–‡æ¡£
â”œâ”€â”€ grok.md                      # æœ¬æŠ¥å‘Š
â”‚
â”œâ”€â”€ haze-Library/                # æ ¸å¿ƒé¡¹ç›®
â”‚   â”œâ”€â”€ pyproject.toml          # Pythoné…ç½®
â”‚   â”œâ”€â”€ rust/
â”‚   â”‚   â”œâ”€â”€ Cargo.toml          # Rusté…ç½®
â”‚   â”‚   â””â”€â”€ src/                # Rustæºä»£ç  (å¾…å®ç°)
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ indicators/         # æŒ‡æ ‡æ¨¡å— (å¾…å®ç°)
â”‚   â”‚   â”‚   â”œâ”€â”€ supertrend.py
â”‚   â”‚   â”‚   â”œâ”€â”€ atr_signals.py
â”‚   â”‚   â”‚   â”œâ”€â”€ pivot_signals.py
â”‚   â”‚   â”‚   â”œâ”€â”€ momentum.py
â”‚   â”‚   â”‚   â”œâ”€â”€ volume_profile.py
â”‚   â”‚   â”‚   â”œâ”€â”€ market_structure.py
â”‚   â”‚   â”‚   â”œâ”€â”€ macd_ha.py
â”‚   â”‚   â”‚   â””â”€â”€ harmonics.py
â”‚   â”‚   â””â”€â”€ data/
â”‚   â”‚       â””â”€â”€ binance.py      # æ•°æ®è·å– (å¾…å®ç°)
â”‚   â””â”€â”€ tests/
â”‚       â”œâ”€â”€ unit/               # å•å…ƒæµ‹è¯• (å¾…å¡«å……)
â”‚       â””â”€â”€ integration/        # é›†æˆæµ‹è¯• (å¾…å¡«å……)
â”‚
â”œâ”€â”€ pandas-ta-kw-main/          # å‚è€ƒ: 212æŒ‡æ ‡ä½“ç³»
â”‚   â”œâ”€â”€ pandas_ta_classic/
â”‚   â”‚   â”œâ”€â”€ candles/            # èœ¡çƒ›å›¾å½¢æ€
â”‚   â”‚   â”œâ”€â”€ momentum/           # åŠ¨é‡æŒ‡æ ‡ (RSI, Stoch, MACD)
â”‚   â”‚   â”œâ”€â”€ overlap/            # ç§»åŠ¨å¹³å‡ (SMA, EMA, BBANDS)
â”‚   â”‚   â”œâ”€â”€ trend/              # è¶‹åŠ¿æŒ‡æ ‡ (ADX, Aroon)
â”‚   â”‚   â”œâ”€â”€ volatility/         # æ³¢åŠ¨ç‡ (ATR, Bollinger)
â”‚   â”‚   â”œâ”€â”€ volume/             # æˆäº¤é‡ (OBV, CMF)
â”‚   â”‚   â””â”€â”€ ...
â”‚   â””â”€â”€ tests/
â”‚
â”œâ”€â”€ pyharmonics-main/           # å‚è€ƒ: è°æ³¢æ¨¡å¼è¯†åˆ«
â”‚   â”œâ”€â”€ src/pyharmonics/
â”‚   â”‚   â”œâ”€â”€ search/             # æ¨¡å¼æœç´¢å¼•æ“
â”‚   â”‚   â”œâ”€â”€ plotter/            # Plotlyå¯è§†åŒ–
â”‚   â”‚   â”œâ”€â”€ marketdata/         # æ•°æ®è·å–
â”‚   â”‚   â””â”€â”€ patterns.py         # è°æ³¢æ¨¡å¼å®šä¹‰
â”‚   â””â”€â”€ tests/
â”‚
â””â”€â”€ ta-lib-main/                # å‚è€ƒ: C/C++æ ¸å¿ƒ
    â”œâ”€â”€ src/                    # 252ä¸ªCæºæ–‡ä»¶
    â”œâ”€â”€ include/                # å¤´æ–‡ä»¶
    â”œâ”€â”€ CLAUDE.md               # Rusté›†æˆæŒ‡å—
    â””â”€â”€ dist/                   # å¤šè¯­è¨€ç»‘å®š
```

---

## ğŸ”§ æŠ€æœ¯æ ˆ

| ç»„ä»¶ | æŠ€æœ¯ | ç‰ˆæœ¬ | ç”¨é€” |
|------|------|------|------|
| **Pythonè¿è¡Œæ—¶** | Python | 3.9-3.14 | ä¸»æ¥å£å±‚ |
| **æ•°æ®å¤„ç†** | Pandas, NumPy | 2.0+, 1.24+ | æ•°æ®ç»“æ„ã€å‘é‡åŒ–è®¡ç®— |
| **Rustè®¡ç®—** | Rust, PyO3 | 1.75+, 0.21 | é«˜æ€§èƒ½å†…æ ¸ (5-10xåŠ é€Ÿ) |
| **å¹¶è¡Œè®¡ç®—** | Rayon | 1.8 | Rustå¤šçº¿ç¨‹å¹¶è¡Œ |
| **æ•°æ®æ¥æº** | CCXT, yfinance | 4.0+, æœ€æ–° | Binance, Yahoo, Alpaca |
| **æ•°æ®éªŒè¯** | Pydantic | 2.0+ | é…ç½®å’Œè¾“å…¥éªŒè¯ |
| **æµ‹è¯•æ¡†æ¶** | Pytest | 7.0+ | å•å…ƒ/é›†æˆæµ‹è¯• |
| **æ‰“åŒ…å·¥å…·** | maturin | 1.0+ | Rust-Pythonæ··åˆæ‰“åŒ… |
| **ä»£ç è´¨é‡** | Black, MyPy, isort | æœ€æ–° | æ ¼å¼åŒ–ã€ç±»å‹æ£€æŸ¥ |

---

## ğŸ“ æ ¸å¿ƒåŠŸèƒ½è§„åˆ’

### æŒ‡æ ‡æ¨¡å— (src/indicators/)

#### 1. SuperTrend (supertrend.py)
- **ç®—æ³•**: AI SuperTrendï¼ˆæ”¯æ’‘/é˜»åŠ›åŠ¨æ€è°ƒæ•´ï¼‰
- **å‚æ•°**: `period=10, multiplier=3.0`
- **è¾“å‡º**: è¶‹åŠ¿çº¿ + ä¹°å–ä¿¡å·
- **å®ç°**: Ruståº•å±‚åŠ é€Ÿ

#### 2. ATR Signals (atr_signals.py)
- **ç®—æ³•**: ATR2ä¿¡å·ç³»ç»Ÿ
- **å‚æ•°**: `atr_period=14, signal_multiplier=2.0`
- **è¾“å‡º**: æ­¢æŸ/æ­¢ç›ˆä»·ä½

#### 3. Pivot Signals (pivot_signals.py)
- **ç®—æ³•**: æ”¯æ’‘/é˜»åŠ›ä½æ£€æµ‹
- **å‚æ•°**: `lookback=20, threshold=0.02`
- **è¾“å‡º**: Pivotç‚¹ + å¼ºåº¦è¯„åˆ†

#### 4. Momentum (momentum.py)
- **ç®—æ³•**: AIåŠ¨é‡æŒ‡æ•°ï¼ˆæ›¿æ¢MLä¸ºçº¯ç®—æ³•ï¼‰
- **å‚æ•°**: `period=14, smoothing=3`
- **è¾“å‡º**: åŠ¨é‡å€¼ + è¶…ä¹°/è¶…å–ä¿¡å·

#### 5. Volume Profile (volume_profile.py)
- **ç®—æ³•**: æˆäº¤é‡åˆ†å¸ƒåˆ†æ
- **å‚æ•°**: `bins=50, value_area=0.7`
- **è¾“å‡º**: POC, VAH, VAL

#### 6. Market Structure (market_structure.py)
- **ç®—æ³•**: å¸‚åœºç»“æ„ + FVG (Fair Value Gap)
- **è¾“å‡º**: é«˜ä½ç‚¹ã€æ–­å±‚ã€ä¾›éœ€åŒº

#### 7. Linear Regression (linear_regression.py)
- **ç®—æ³•**: çº¿æ€§å›å½’ + ä¾›éœ€åŒº
- **å‚æ•°**: `period=50, deviation=2.0`
- **è¾“å‡º**: è¶‹åŠ¿çº¿ + é€šé“

#### 8. MACD Heikin Ashi (macd_ha.py)
- **ç®—æ³•**: åŠ¨æ€MACD + å¹³æ»‘èœ¡çƒ›å›¾
- **å‚æ•°**: `fast=12, slow=26, signal=9`
- **è¾“å‡º**: MACD + ä¿¡å·çº¿ + æŸ±çŠ¶å›¾

#### 9. Harmonics (harmonics.py)
- **ç®—æ³•**: è°æ³¢æ¨¡å¼è¯†åˆ«ï¼ˆè¿ç§»è‡ªpyharmonicsï¼‰
- **æ¨¡å¼**: XABCD, Gartley, Butterfly, Bat, Crab
- **è¾“å‡º**: æ¨¡å¼åæ ‡ + å¯ä¿¡åº¦è¯„åˆ†

### æ•°æ®æ¨¡å— (src/data/)

#### binance.py
- **åŠŸèƒ½**:
  - å†å²Kçº¿è·å– (CCXT)
  - å®æ—¶WebSocketè®¢é˜…
  - æ•°æ®éªŒè¯å’Œæ¸…æ´—
- **è¾“å‡º**: æ ‡å‡†åŒ–DataFrameï¼ˆOHLCV + datetimeç´¢å¼•ï¼‰

---

## ğŸš€ å¼€å‘è§„åˆ’ (4é˜¶æ®µ)

### é˜¶æ®µ1: ç¯å¢ƒå‡†å¤‡ (1-2å‘¨) - å½“å‰é˜¶æ®µ
- [x] å®‰è£…Claude Codeå·¥å…·
- [x] åˆå§‹åŒ–pyproject.toml + Cargo.toml
- [ ] å®ç°binance.pyæ•°æ®æ¨¡å—
- [ ] åŸºç¡€PyO3æ¨¡å—æµ‹è¯•

### é˜¶æ®µ2: Rustå†…æ ¸å¼€å‘ (3-4å‘¨)
- [ ] ä¼˜å…ˆæŒ‡æ ‡: SuperTrend, ATR, Volume Profile, Linear Regression
- [ ] ä½¿ç”¨rayonå¹¶è¡ŒåŒ–
- [ ] PyO3ç»‘å®šå’Œé”™è¯¯å¤„ç†
- [ ] åŸºå‡†æµ‹è¯• (å¯¹æ¯”çº¯Python)

### é˜¶æ®µ3: Pythonæ¥å£å’ŒæŒ‡æ ‡ (4-6å‘¨)
- [ ] é€æŒ‡æ ‡å®ç°PythonåŒ…è£…
- [ ] MLæ›¿æ¢ä¸ºçº¯ç®—æ³•
- [ ] è°æ³¢æŒ‡æ ‡è¿ç§» (pyharmonics â†’ harmonics.py)
- [ ] PytestéªŒè¯æ•°å€¼å‡†ç¡®æ€§

### é˜¶æ®µ4: æ‰“åŒ…å’Œæ–‡æ¡£ (2å‘¨)
- [ ] maturinæ„å»ºwheel
- [ ] Sphinx APIæ–‡æ¡£ç”Ÿæˆ
- [ ] æ€§èƒ½ä¼˜åŒ–å’Œæ‰©å±•Rustè¦†ç›–
- [ ] PyPIå‘å¸ƒ

---

## ğŸ“Š æ•°æ®æµè®¾è®¡

### è¾“å…¥æ ¼å¼
```python
DataFrame: {
    'open': float64,
    'high': float64,
    'low': float64,
    'close': float64,
    'volume': float64,
    index: datetime (UTC)
}

params: dict = {
    'period': int,
    'multiplier': float,
    # ... æŒ‡æ ‡ç‰¹å®šå‚æ•°
}
```

### è¾“å‡ºæ ¼å¼
```python
SignalResult = NamedTuple(
    'values': pd.Series,              # æŒ‡æ ‡å€¼
    'signals': pd.Series,             # ä¹°/å–ä¿¡å· (1/-1/0)
    'metadata': dict                  # æ­¢æŸ/æ­¢ç›ˆç­‰å…ƒæ•°æ®
)
```

### æ•°æ®æµç®¡é“
```
User DataFrame
    â†“ (validate)
SFGData (æ£€æŸ¥åˆ—ã€NaNå¤„ç†ã€ç¼“å­˜)
    â†“ (convert)
Vec<Candle> (Rustç»“æ„)
    â†“ (compute - Rustå¹¶è¡Œ)
Vec<f64> (è®¡ç®—ç»“æœ)
    â†“ (wrap)
pd.Series/DataFrame (è¿”å›ç»™ç”¨æˆ·)
```

---

## ğŸ’¡ å…³é”®è®¾è®¡å†³ç­–

### ä¸ºä»€ä¹ˆé€‰æ‹©Ruståº•å±‚ï¼Ÿ

**æ€§èƒ½ä¼˜åŠ¿**:
- è®¡ç®—å¯†é›†å‹ä»»åŠ¡ (ATR, SuperTrend) æå‡ **5-10å€**
- æ— GCå¼€é”€ï¼Œé›¶æˆæœ¬æŠ½è±¡
- SIMDå‘é‡åŒ– + rayonå¤šçº¿ç¨‹

**å†…å­˜å®‰å…¨**:
- ç±»å‹ç³»ç»Ÿç¼–è¯‘æœŸä¿è¯
- æ— é‡æŒ‡é’ˆ/æ•°æ®ç«äº‰
- å¯é¢„æµ‹çš„æ€§èƒ½

**äº’æ“ä½œæ€§**:
- PyO3æä¾›ç±»Pythonicç»‘å®š
- maturinç®€åŒ–æ‰“åŒ…æµç¨‹
- å¯é€æ­¥RuståŒ–çƒ­ç‚¹è·¯å¾„

### ä¸ºä»€ä¹ˆåˆ†å±‚è®¾è®¡ï¼Ÿ

**å…³æ³¨åˆ†ç¦»**:
- Pythonè´Ÿè´£ï¼šAPIè®¾è®¡ã€æ•°æ®éªŒè¯ã€ä¸šåŠ¡é€»è¾‘
- Rustè´Ÿè´£ï¼šæ•°å€¼è®¡ç®—ã€å¹¶è¡Œå¤„ç†ã€æ€§èƒ½å…³é”®è·¯å¾„

**æ˜“äºæµ‹è¯•**:
- Rustæ ¸å¿ƒç‹¬ç«‹éªŒè¯ï¼ˆcargo testï¼‰
- Pythonå±‚é›†æˆæµ‹è¯•ï¼ˆpytestï¼‰
- æ€§èƒ½åŸºå‡†å¯¹æ¯”

**æ¸è¿›è¿ç§»**:
- ä»çº¯PythonåŸå‹å¼€å§‹
- è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ
- é€‰æ‹©æ€§RuståŒ–

---

## ğŸ“š å‚è€ƒåº“ä½¿ç”¨ç¤ºä¾‹

### pandas-ta-kw ç”¨æ³•
```python
import pandas_ta_classic as ta

# æ–¹æ³•1: æ˜¾å¼è°ƒç”¨
sma_20 = ta.sma(df['close'], length=20)
rsi_14 = ta.rsi(df['close'], length=14)

# æ–¹æ³•2: DataFrameæ‰©å±• (æ¨è)
df.ta.sma(length=20, append=True)
df.ta.rsi(length=14, append=True)
df.ta.bbands(length=20, append=True)

# æ–¹æ³•3: ç­–ç•¥ç³»ç»Ÿ
strategy = ta.Strategy('MyStrategy')
strategy.add('sma', length=20)
strategy.add('rsi', length=14)
df.ta.strategy = strategy
```

### pyharmonics ç”¨æ³•
```python
from pyharmonics.marketdata import BinanceCandleData
from pyharmonics.search import HarmonicSearch
from pyharmonics.plotter import Plotter

# è·å–æ•°æ®
b = BinanceCandleData()
b.get_candles('BTCUSDT', b.MIN_15, 1000)

# æœç´¢è°æ³¢æ¨¡å¼
m = HarmonicSearch(b.df)
m.search()

# å¯è§†åŒ–
p = Plotter(b.df, 'BTCUSDT', b.MIN_15)
p.add_harmonic_plots(m.get_patterns())
p.show()
```

---

## ğŸ§ª æµ‹è¯•ç­–ç•¥

### å•å…ƒæµ‹è¯•
- **æ•°å€¼å‡†ç¡®æ€§**: å¯¹æ ‡ta-lib/pandas-taçš„å‚è€ƒå®ç°
- **è¾¹ç•Œæ¡ä»¶**: NaNå¤„ç†ã€ç©ºDataFrameã€å•è¡Œæ•°æ®
- **å‚æ•°éªŒè¯**: éæ³•è¾“å…¥ã€ç±»å‹é”™è¯¯

### é›†æˆæµ‹è¯•
- **E2Eæµç¨‹**: Binanceæ•°æ® â†’ æŒ‡æ ‡è®¡ç®— â†’ ä¿¡å·ç”Ÿæˆ
- **å¤šæ—¶é—´æ¡†æ¶**: 1m, 5m, 15m, 1h, 1d
- **çœŸå®æ•°æ®**: å†å²å›æµ‹éªŒè¯

### æ€§èƒ½æµ‹è¯•
- **åŸºå‡†å¯¹æ¯”**: Rust vs çº¯Python (ç›®æ ‡5-10x)
- **å¹¶è¡Œæ•ˆç‡**: å•çº¿ç¨‹ vs å¤šçº¿ç¨‹
- **å†…å­˜ä½¿ç”¨**: å¤§è§„æ¨¡æ•°æ®é›† (100k+ bars)

---

## ğŸ” å¯ç»´æŠ¤æ€§æŒ‡å—

### ä»£ç ç»„ç»‡
```
âœ“ æ¯ä¸ªæŒ‡æ ‡ç‹¬ç«‹æ–‡ä»¶ï¼ˆå•ä¸€èŒè´£ï¼‰
âœ“ é€šç”¨é€»è¾‘æå–åˆ°baseæ¨¡å—
âœ“ é¿å…å¾ªç¯ä¾èµ–
âœ“ æ˜ç¡®çš„æ¨¡å—è¾¹ç•Œ
```

### å‘½åè§„èŒƒ
```python
# Python
def calculate_supertrend(...)  # snake_case å‡½æ•°
class IndicatorConfig:         # PascalCase ç±»

# Rust
fn calculate_atr(...)          # snake_case å‡½æ•°
struct Candle { ... }          # PascalCase ç»“æ„
```

### æ³¨é‡Šæ ‡å‡†
```python
def supertrend(df: pd.DataFrame, period: int = 10, multiplier: float = 3.0):
    """
    AI SuperTrend æŒ‡æ ‡è®¡ç®—

    ç®—æ³•: åŸºäºATRåŠ¨æ€è°ƒæ•´çš„è¶‹åŠ¿è·Ÿè¸ªç³»ç»Ÿ

    Parameters
    ----------
    df : pd.DataFrame
        åŒ…å«OHLCçš„DataFrame
    period : int
        ATRå‘¨æœŸ (é»˜è®¤10)
    multiplier : float
        ATRä¹˜æ•° (é»˜è®¤3.0)

    Returns
    -------
    SignalResult
        values: SuperTrendçº¿
        signals: ä¹°å–ä¿¡å· (1=ä¹°å…¥, -1=å–å‡º, 0=æŒæœ‰)
        metadata: {'stop_loss': float, 'take_profit': float}
    """
```

### æµ‹è¯•è¦†ç›–è¦æ±‚
- å•å…ƒæµ‹è¯•: **>80%** ä»£ç è¦†ç›–ç‡
- é›†æˆæµ‹è¯•: æ‰€æœ‰æŒ‡æ ‡çš„E2EéªŒè¯
- æ€§èƒ½æµ‹è¯•: æ¯ä¸ªRustå‡½æ•°çš„åŸºå‡†

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨

### ç«‹å³è¡ŒåŠ¨ (é˜¶æ®µ1å‰©ä½™ä»»åŠ¡)
1. **å®ç°binance.pyæ•°æ®æ¨¡å—**
   ```python
   # ä¼˜å…ˆçº§: P0
   # ä¼°è®¡: 1-2å¤©
   class BinanceData:
       def get_klines(symbol, interval, limit) -> pd.DataFrame
       def validate_dataframe(df) -> SFGData
   ```

2. **ç¼–å†™åŸºç¡€PyO3æµ‹è¯•**
   ```python
   # ä¼˜å…ˆçº§: P0
   # ä¼°è®¡: 1å¤©
   # éªŒè¯Rustç»‘å®šæ­£å¸¸å·¥ä½œ
   ```

### çŸ­æœŸç›®æ ‡ (é˜¶æ®µ2å¯åŠ¨)
3. **å®ç°ç¬¬ä¸€ä¸ªRustæŒ‡æ ‡: SuperTrend**
   ```rust
   // ä¼˜å…ˆçº§: P1
   // ä¼°è®¡: 3-4å¤©
   // åŒ…å«: Rustå®ç° + PyO3ç»‘å®š + åŸºå‡†æµ‹è¯•
   ```

4. **å»ºç«‹æ€§èƒ½æµ‹è¯•æ¡†æ¶**
   ```python
   # ä¼˜å…ˆçº§: P1
   # ä¼°è®¡: 2å¤©
   # ä½¿ç”¨pytest-benchmarkå¯¹æ¯”Python vs Rust
   ```

---

## ğŸ“– ç›¸å…³æ–‡æ¡£

- `claude.md`: æ¶æ„å¸ˆè¡Œä¸ºå‡†åˆ™ (KISS/YAGNI/SOLID/å¥¥å¡å§†å‰ƒåˆ€)
- `sprint.md`: SFG Indicators Library è¯¦ç»†å¼€å‘è§„åˆ’
- `pandas-ta-kw-main/docs/`: 212æŒ‡æ ‡APIæ–‡æ¡£
- `pyharmonics-main/README.md`: è°æ³¢æ¨¡å¼è¯†åˆ«æ•™ç¨‹
- `ta-lib-main/CLAUDE.md`: Rusté›†æˆæŒ‡å—

---

## ğŸ“ å…³é”®èµ„æº

### é…ç½®æ–‡ä»¶
- `haze-Library/pyproject.toml`: PythonåŒ…é…ç½®
- `haze-Library/rust/Cargo.toml`: Rustä¾èµ–ç®¡ç†

### å‚è€ƒå®ç°
- `pandas-ta-kw-main/pandas_ta_classic/`: 212æŒ‡æ ‡æºç 
- `pyharmonics-main/src/pyharmonics/`: è°æ³¢æ¨¡å¼ç®—æ³•
- `ta-lib-main/src/ta_func/`: Cå‡½æ•°å®ç°

### å·¥å…·é“¾
- maturin: Rust-Pythonæ··åˆæ‰“åŒ…
- PyO3: Rust-Python FFIç»‘å®š
- rayon: Rustå¹¶è¡Œè®¡ç®—åº“

---

**æœ€åæ›´æ–°**: 2025-12-25
**é¡¹ç›®çŠ¶æ€**: é˜¶æ®µ1 (ç¯å¢ƒå‡†å¤‡ä¸­)
**ä¸‹ä¸€é‡Œç¨‹ç¢‘**: å®Œæˆbinance.pyæ•°æ®æ¨¡å— + åŸºç¡€PyO3æµ‹è¯•
